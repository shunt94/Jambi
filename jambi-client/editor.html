<!DOCTYPE html>
<html>
<head>
    <title>Jambi</title>
    <link rel="stylesheet" href="public/css/main.css">
    <link rel="stylesheet" href="public/css/jambi_editor.css">
    <link rel="stylesheet" href="public/css/font-awesome.min.css">
	<link rel="stylesheet" href="codemirror/lib/codemirror.css">
	
	<link rel="stylesheet" type="text/css" href="public/css/user.css">
	
	<link rel="stylesheet" href="codemirror/theme/monokai.css">
	

</head>

<body>
    <div class="container">
        <div class="topbar">
	        <div class="topbar-tabs">
	        	<div id="openfiles">
	        		<div class="file-container">
	        			<div class="file active">
		        			<span class="close"><i class="fa fa-times-circle"></i></span>
	        				<span class="filename">index.html</span>
	        			</div>
	        		</div>
					<div class="file-container">
	        			<div class="file">
	        				<span class="close"><i class="fa fa-times-circle"></i></span>
	        				<span class="filename">projectindex.js</span>
	        			</div>
	        		</div>
	        	</div>
	        </div>
	        <div class="newfile-tab">
	        	<i class="fa fa-plus-square-o"></i>
			</div>
        </div>
        
        <div class="jambi-body" id="jambi-body">
	    
	    </div>
        
        
        <div class="lowerbar">
        	<a href='#/project' class="btn btn-primary">Projects</a>
        	<a href='#/home' class="btn btn-primary">Editor</a>
        </div>
    </div>
    
    
    <style type="text/css">
	    .CodeMirror {
			background: none;
			height: 100%;    
	    }
	    .cm-s-monokai span.cm-error {
		    background-color: transparent;
	    }	    
	    cm-keyword, .cm-atom {
			font-weight: bold;
		}
    </style>
    
    <!-- File Save,Load,Etc -->
    <input style="display:none;" id="fileDialog" type="file" multiple />
	<input style="display:none;" type="file" nwsaveas="untitled.html" id="saveDialog"/>
	<input style="display:none;" id="selectDialog" type="file" nwdirectory />
	
	
	<script type="text/javascript" src="jquery.js"></script>
	
	<script src="codemirror/lib/codemirror.js"></script>
	
	<script src="codemirror/mode/htmlmixed/htmlmixed.js"></script>
	<script src="codemirror/mode/xml/xml.js"></script>
	<script src="codemirror/mode/javascript/javascript.js"></script>
	<script src="codemirror/mode/css/css.js"></script>
	<script src="codemirror/mode/htmlmixed/htmlmixed.js"></script> 
	
	<script src="public/js/jambi.js"></script>   
	
	<script src="public/js/underscore-min.js"></script>   
	<script src="public/js/backbone-min.js"></script>
	 
	
    <script type="text/javascript" src="public/js/jambiSetup.js"></script>   
    <!--<script type="text/javascript" src="public/js/winstate.js"></script>-->
    
    <script type="text/template" id="user-edit-template">
     
     	<div class="editor-container" id="jambi-editor"></div>
	        
        <div class="sidebar">
        	<div class="sidebar-title center">
        		Jambi
        	</div>
        	
        	<div class="sidebar-content">

        	</div>
        	
        	<div class="sidebar-footer">
				<div id="stackoverflow-search">
					<input type="text" placeholder="Search Stackoverflow.com"/>
				</div>
			</div>
        </div>

    </script>
    
    <script type="text/template" id="projects-template">
	        


    
    </script>
    
    <script type="text/javascript">
		
		
		
		var jambi = new Jambi();
		
		
		var firstLoad = true;
		
		
		// Backbone
		var User = Backbone.Model.extend({
			urlRoot: '/users'
		});
	
		var EditorView = Backbone.View.extend({
			el: '#jambi-body',
			render: function(){
				var template = _.template($('#user-edit-template').html(), {});
				this.$el.html(template);
			}
		});
		
		var ProjectView = Backbone.View.extend({
			el: '#jambi-body',
			render: function(){
				var template = _.template($('#projects-template').html(), {});
				this.$el.html(template);
			}
		});
	
		var Router = Backbone.Router.extend({
			routes: {
				'home': 'home',
				'project': 'projects'
			}
		});
		
		
		var editorView = new EditorView();
		var projectView = new ProjectView();
	
		var router = new Router();
		router.on('route:home', function() {
			editorView.render();
			if(firstLoad) {
				jambi.initCodeMirror();
				firstLoad = false;
			}
			
		});
		
		router.on('route:projects', function() {
			projectView.render();
		});
	
	
		Backbone.history.start();
		
		window.location.replace("#/home");
		
		
		
		
		jambi.menuSetup();
		
		
		

		
		console.log(jambi);
		
				
    </script>
    

</body>
</html>
